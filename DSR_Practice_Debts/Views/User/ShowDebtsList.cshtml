@model IEnumerable<DSR_Practice_Debts.Models.Debt>
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Debts";
}



@*@foreach (var item in Model) {
    <h1>@item.Summ ___ @item.Date</h1>
}*@

@{
	int summ = Model.Sum(x => x.Summ);
}

<h1>Сумма займов: @summ</h1>

<table class="table">

		<thead>
			<tr>
				<th>Id</th>
				<th>Сумма</th>
				<th>Дата взятия займа</th>

			</tr>
		</thead>
		<tbody>
			@foreach (var item in Model)
			{
				if ((DateTime.Now - item.Date).TotalDays < 7.0)
				{
					<tr>
						<td class="bg-danger">@item.IdDebt</td>
						<td class="bg-danger">@item.Summ рублей</td>
						<td class="bg-danger">@item.Date</td>
					</tr>
				}
				else {
					<tr>
						<td class="bg-warning">@item.IdDebt</td>
						<td class="bg-warning">@item.Summ рублей</td>
						<td class="bg-warning">@item.Date</td>
					</tr>
				}
			}
		</tbody>

</table>


<script>
	document.addEventListener('DOMContentLoaded', () => {

		const getSort = ({ target }) => {
			const order = (target.dataset.order = -(target.dataset.order || -1));
			const index = [...target.parentNode.cells].indexOf(target);
			const collator = new Intl.Collator(['en', 'ru'], { numeric: true });
			const comparator = (index, order) => (a, b) => order * collator.compare(
				a.children[index].innerHTML,
				b.children[index].innerHTML
			);

			for (const tBody of target.closest('table').tBodies)
				tBody.append(...[...tBody.rows].sort(comparator(index, order)));

			for (const cell of target.parentNode.cells)
				cell.classList.toggle('sorted', cell === target);
		};

		document.querySelectorAll('.table thead').forEach(tableTH => tableTH.addEventListener('click', () => getSort(event)));

	});
</script>